var C=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var i=(s,e,t)=>(C(s,e,"read from private field"),t?t.call(s):e.get(s)),r=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},l=(s,e,t,n)=>(C(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);var u=(s,e,t)=>(C(s,e,"access private method"),t);import{L as c,j as A}from"./vendor.28530bdd.js";const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const B of o.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&n(B)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}};E();var d;const M=class{constructor(e){r(this,d,void 0);l(this,d,new T(e))}static new(e){return new M(e)}andSetAttributionPrefix(e){return i(this,d).webmap.attributionControl.setPrefix(e),this}andAddLayer(e){return i(this,d).webmap.addLayer(e),this}andBuild(){return i(this,d)}};let S=M;d=new WeakMap;var g,b,w,m,h,p,f,y,L,F,N,G,O,P,x,j,v,$;class T{constructor(e){r(this,L);r(this,N);r(this,O);r(this,x);r(this,v);r(this,g,void 0);r(this,b,void 0);r(this,w,void 0);r(this,m,{});r(this,h,{});r(this,p,void 0);r(this,f,void 0);r(this,y,void 0);l(this,g,e.webmap),l(this,w,e.config),l(this,b,e.map),l(this,p,c.control.layers().addTo(i(this,g))),l(this,f,e.pathGetter||k)}get webmap(){return i(this,g)}get map(){return i(this,b)[0]}get mapName(){return i(this,b)[1]}get config(){return i(this,w)}initialize(){this.webmap.setMaxBounds(this.map.bounds),this.webmap.fitBounds(this.map.bounds),l(this,m,u(this,O,P).call(this)),u(this,N,G).call(this),l(this,h,u(this,x,j).call(this)),l(this,y,u(this,L,F).call(this)),i(this,y)&&(u(this,v,$).call(this,i(this,y)[1]),i(this,y)[0].addTo(this.webmap)),this.webmap.on("baselayerchange",e=>u(this,v,$).call(this,e.name))}}g=new WeakMap,b=new WeakMap,w=new WeakMap,m=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,y=new WeakMap,L=new WeakSet,F=function(){for(const e in i(this,m))if(e===this.map.mainLevel)return[i(this,m)[e],e]},N=new WeakSet,G=function(){for(const e in i(this,m)){const t=i(this,m)[e];i(this,p).addBaseLayer(t,e)}},O=new WeakSet,P=function(){const e={};for(const t in this.map.levels){const n=this.map.levels[t],a=[];if(n.underlays)for(const o of n.underlays)a.push(c.imageOverlay(i(this,f).call(this,this.mapName,o,this.map.layers[0]),this.map.bounds,{className:"UnderlayLayer"}));e[t]=c.layerGroup(a).addLayer(c.imageOverlay(i(this,f).call(this,this.mapName,t,this.map.layers[0]),this.map.bounds))}return e},x=new WeakSet,j=function(){const e={};for(const t in this.map.levels){this.map.levels[t],e[t]={};for(const n of this.map.layers.slice(1)){const a=this.config.layers[n];e[t][a.display]=c.imageOverlay(i(this,f).call(this,this.mapName,t,n),this.map.bounds)}}return e},v=new WeakSet,$=function(e){for(const t in i(this,h))for(const n in i(this,h)[t]){const a=i(this,h)[t][n];i(this,p).removeLayer(a)}for(const t in i(this,h)[e]){const n=i(this,h)[e][t];i(this,p).addOverlay(n,t)}};function k(s,e,t){return`${s}-${e}-${t}.png`}const z="https://raw.githubusercontent.com/igorsaux/webmap/master/sputnik.yaml",I="https://raw.githubusercontent.com/igorsaux/webmap/master/images/";function U(s,e,t){return`${I}${s}-${e}-${t}.png`}function W(s,e){const t=document.createElement("div");t.id="webmap",document.body.appendChild(t),S.new({webmap:new c.Map(t,{center:[-125,125],zoom:4,crs:c.CRS.Simple,maxZoom:6,minZoom:2}),map:e,config:s,pathGetter:U}).andSetAttributionPrefix('OnyxBay \u2022 Igor Spichkin 2021 \u2022 <a href="https://github.com/igorsaux/webmap">GitHub</a>').andAddLayer(c.tileLayer("./space.png",{tileSize:c.point(322,322),noWrap:!1})).andBuild().initialize()}function Z(s){const e=document.createElement("div");e.id="ListOfMaps";const t=document.createElement("h1");t.innerText="- \u0421\u043F\u0438\u0441\u043E\u043A \u043A\u0430\u0440\u0442 -",e.appendChild(t);for(const n in s){const a=document.createElement("a");a.innerText=n,a.href=`#/${n.toLowerCase()}`,e.appendChild(a)}document.body.appendChild(e)}async function q(){const s=await(await fetch(z)).text(),e=A.load(s),t=location.hash.replace("#/","").toLowerCase(),n=Object.keys(e.groups).find(a=>a.toLowerCase()===t);if(!n||!t)return Z(e.groups);W(e,[e.groups[n],n])}q();window.onhashchange=function(){location.reload()};
